version: 1
frontend:
  phases:
    preBuild:
      commands:
        - npm ci
    build:
      commands:
        - npm run build
  artifacts:
    baseDirectory: .next
    files:
      - '**/*'

test:
  phases:
    preTest:
      commands:
        - npm ci
        - sudo apt-get install libxss1 libappindicator1 libindicator7
        - wget https://dl.google.com/linux/direct/google-chrome-stable_current_amd64.deb
        - sudo apt install ./google-chrome*.deb
    test:
      commands:
        - 'npx wdio run ./wdio.conf.js'
  artifacts:
    baseDirectory: /
    configFilePath: '**/mochawesome.json'
    files:
      - '**/*.png'
      - '**/*.mp4'